steps:
              - task: DownloadPipelineArtifact@2
                displayName: Download Build Artifacts - ADF ARM templates
                inputs:
                  artifactName: '$(CommonPublishArmTemplateName)'
                  targetPath: '$(WorkspaceArmTemplateDirectory)'
              - script: dir
                displayName: List files in Workspace
                workingDirectory: '$(WorkspaceArmTemplateDirectory)'
              ### ADF Pre-Deployment - Stop ADF Triggers ###
              #https://docs.microsoft.com/en-us/azure/data-factory/continuous-integration-deployment#script  
              - task: NodeTool@0
                inputs:
                  versionSpec: '18.x'
                displayName: 'Listing Files'
              - script: |
                  ls -al
                  pwd
                  ls -al $(Build.Repository.LocalPath)
                  pwd
                  ls -al $(Pipeline.Workspace)
              - task: AzurePowerShell@5
                displayName: ADF Pre-Deployment
                inputs:
                  azureSubscription: '$(azure_service_connection_name)'
                  ScriptType: 'FilePath'
                  ScriptPath: '$(Pipeline.Workspace)/PowerShell-Scripts/Deploy-ADF.ps1'
                  ScriptArguments: '-ResourceGroupName $(resource_group_name) -DataFactoryName $(azure_data_factory_name) -predeployment $true -deleteDeployment $false -armTemplate $(WorkspaceArmTemplateDirectory)/ARMTemplateParametersForFactory.json'
                  azurePowerShellVersion: LatestVersion
                  

              - task: AzureResourceManagerTemplateDeployment@3
                displayName: 'Deploying to Dev RG task'
                inputs:
                  deploymentScope: 'Resource Group'
                  azureResourceManagerConnection: '$(azure_service_connection_name)'
                  subscriptionId: '$(azure_subscription_id)'
                  action: 'Create Or Update Resource Group'
                  resourceGroupName: '$(resource_group_name)'
                  location: '$(ADF_LOCATION)'
                  templateLocation: 'Linked artifact'
                  csmFile: '$(WorkspaceArmTemplateDirectory)/ARMTemplateForFactory.json'
                  csmParametersFile: '$(WorkspaceArmTemplateDirectory)/ARMTemplateParametersForFactory.json'
                  #overrideParameters: '-name ${{ parameters.ADF_NAME }} -location $(ADF_LOCATION) -factoryName $(azure_data_factory_name)'
                  #overrideParameters: '-factoryName "$(DevAdfName)" -LS_SalesDatabase_connectionString "$(DevSalesDbConnectionString)" -LS_DataLake_properties_typeProperties_url "$(DevDataLakeUrl)" -LS_KeyVault_properties_typeProperties_baseUrl "$(DevKeyVaultBaseUrl)"'
                  deploymentMode: 'Incremental'
                  
              ### ADF Post-Deployment - Clean up and Start ADF Triggers ###
              ###https://docs.microsoft.com/en-us/azure/data-factory/continuous-integration-deployment#script    
              - task:  AzurePowerShell@5
                displayName: ADF Post-Deployment
                inputs:
                  azureSubscription: '$(azure_service_connection_name)'
                  ScriptType: 'FilePath'
                  ScriptPath: '$(Pipeline.Workspace)/PowerShell-Scripts/Deploy-ADF.ps1'
                  ScriptArguments: '-ResourceGroupName $(resource_group_name) -DataFactoryName $(azure_data_factory_name) -predeployment $false -deleteDeployment $true -armTemplate $(WorkspaceArmTemplateDirectory)/ARMTemplateParametersForFactory.json'
                  azurePowerShellVersion: LatestVersion   
                  